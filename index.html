<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Upload Gambar</title>
</head>

<body>

    <h2>Form Upload Gambar</h2>

    <form method="post" enctype="multipart/form-data">
        <label for="thumbnail">Pilih Gambar:</label><br>
        <input type="file" id="thumbnail" name="thumbnail" accept="image/jpeg, image/jpg, image/webp"><br><br>
        <input type="submit" value="Submit">
    </form>

    <script>
        const form = document.querySelector('form');

        form.addEventListener('submit', async (e) => {
            e.preventDefault(); // Mencegah form untuk melakukan submit langsung

            const formData = new FormData(form); // Membuat objek FormData untuk mengirim data form

            // const fileInput = document.querySelector('input[type="file"]');
            // const file = fileInput.files[0]; // Mengambil file yang diunggah

            // formData.append('thumbnail', file); // Menambahkan file ke FormData dengan nama thumbnail

            try {
                const response = await fetch("http://localhost:3000/api/recipe", {
                    method: 'POST',
                    // headers: {
                    //     "content-type": "application/json"
                    // },
                    body: formData
                });

                if (!response.ok) {
                    await response.json().then(res => {
                        throw res
                    })
                }

                const responseData = await response.json();
                console.log('URL gambar yang diunggah:', responseData);

                // Lakukan sesuatu setelah gambar berhasil diunggah, seperti menampilkan gambar atau memberikan feedback ke pengguna

            } catch (error) {
                throw error
                // Berikan feedback kepada pengguna bahwa terjadi kesalahan saat mengunggah gambar
            }
        });

    </script>

</body>

</html>